[localhost에 대한 글](https://velog.io/@gonasooc/localhost-127.0.0.1-192.168.0.1)을 작성한 후, 사내 시니어 개발자분이 우연히 내 글을 읽고 감사하게도 꼬리 질문을 해주셨다.

> `::1`이 왜 localhost인지는 안 궁금했어요?
> 

운영체제 내의 hosts 파일을 까보고 결과를 아래와 같이 첨부했었다.

```
##
# Host Database
#
# localhost is used to configure the loopback interface
# when the system is booting.  Do not change this entry.
##
127.0.0.1	localhost
255.255.255.255	broadcasthost
::1             localhost
```

근본적인 질문을 자주 던지는 것이 좋은 개발자의 특징임을 알면서도 종종 망각하곤 한다. 하지만 망각과 복기를 통해 태도는 시나브로 변할 수 있다고 믿기에, 다시 질문을 던질 기회를 얻게된 것 자체에 감사함을 느낀다. 그렇다면 `::1`이 왜 localhost일까? 이전 글에서 `127.0.0.1`이 localhost로 매핑된다는 것을 설명했지만, `::1`도 같은 역할을 한다는 점을 깊게 고민해 보지 못했었다.

### IPv6에서의 루프백과 축약어

`::1`은 IPv6에서 루프백 주소로 지정된 값이다. IPv4에서는 `127.0.0.1`이 루프백 주소였지만, IPv6에서는 주소 공간이 훨씬 넓어졌으며, `::1/128` 딱 한 개의 주소만 루프백으로 할당되었다. 이는 단순히 IPv4의 `127.0.0.1`과 같은 역할을 하는 주소로, 자기 자신을 가리킨다.

IPv6는 기존 IPv4보다 훨씬 긴 주소 체계를 사용하기 때문에 특정한 축약법이 존재한다. 예컨대, `0000:0000:0000:0000:0000:0000:0000:0001`과 같이 길게 표현되는 주소는 간략하게 `::1`로 표현될 수 있다.

이러한 축약은 다음과 같은 규칙을 따른다.

1. 연속된 0은 `::`로 축약할 수 있다. (단, 한 번만 사용 가능)
2. 앞쪽에 있는 0은 생략할 수 있다. (`2001:0db8:0000:0000:0000:ff00:0042:8329` → `2001:db8::ff00:42:8329`로 축약 가능)

### IPv4 주소는 예약된 IP 주소는 어떻게 정해졌을까?

`127.0.0.1`이 루프백 주소가 된 이유는 127번 대역이 처음부터 테스트 용도로 예약되었기 때문이다. `127.0.0.0`~`127.255.255.255`는 루프백 네트워크로 지정되었고, 그중에서 가장 일반적으로 사용되는 주소가 `127.0.0.1`이다.

`192.168.0.1` 같은 사설 IP 대역도 마찬가지다. IETF(국제 인터넷 표준화 기구)에서 공포한 표준인 [RFC 1918](https://datatracker.ietf.org/doc/html/rfc1918#section-3)에서 사설 네트워크에서 사용할 수 있는 범위를 다음과 같이 지정했다.

```
     10.0.0.0        -   10.255.255.255  (10/8 prefix)
     172.16.0.0      -   172.31.255.255  (172.16/12 prefix)
     192.168.0.0     -   192.168.255.255 (192.168/16 prefix)
```

### IPv6에서의 축약, CIDR

IPv6 주소가 길다 보니 `192.1.56.10/96` 같은 형태로 표현하는 방식이 등장했다. 이 표기법은 CIDR(Classless Inter-Domain Routing) 표기법이라고 하는데, 네트워크 주소와 서브넷을 정의하는 방식이다.

IPv4에서도 `/24`, `/16` 같은 서브넷 마스크 표현이 사용되었지만, IPv6에서는 주소 공간이 훨씬 크기 때문에 `/64`, `/96` 같은 더 세분화된 범위 설정이 필요했다. 이는 IPv6 주소를 관리하고 특정 대역을 효율적으로 사용하기 위한 방안이었다.

### `255.255.255.255`? broadcasthost?

추가로, hosts 파일에 있던 `255.255.255.255` broadcasthost는 무엇일까? 네트워크 상의 모든 장치에게 패킷을 전송하는 데 사용되는 특별한 주소다. 서브넷을 알 수 없는 경우에도 사용할 수 있고 주로 DHCP 요청에 사용된다는데, 이 부분은 다른 주제로 다음 기회에 체크해봐야겠다. 

### 번외 - Vite에서 기본 포트로 `5173`을 선택한 이유

문득 궁금해졌다. Vite는 왜 기본 포트로 `5173`을 사용할까?

Evan You나 Vite 개발진이 공식적으로 밝힌 내용은 없는 것 같다. 우선 실용적으로는 `3000`, `4000`, `5000`번대 포트는 일반적으로 CRA, Next.js 같은 다른 빌드도구나 프레임워크에서 주로 사용되기 때문에 충돌을 피하려 했을 가능성이 있다. 물론 사용자가 임의로 포트를 변경할 순 있지만 변경하지 않아도 매끄러운 개발자 경험을 줄 수 있다는 점에서 이점이 있다.

추가로 Vite는 기존 번들링 방식과 차별화된 빠른 개발 서버를 제공하는 것이 목표였기 때문에 기존과 다른 방식을 강조하는 의미로 잘 사용되지 않는 포트를 선택했을 가능성 또한 있을 수 있다. 물론 뇌피셜이다. 

`5173`은 각각 영어로 변환해서 보자면 SITE와 비슷하다. 여기서 5를 로마자 V로 해석하면 VITE로도 읽을 수 있다. 이는 일부 커뮤니티에서 추측하는 비공식적인 이유지만 꽤 설득력 있는 해석이다. 

### 참고자료

- https://datatracker.ietf.org/doc/html/rfc1918#section-3
- https://www.ibm.com/docs/ko/i/7.5?topic=concepts-ipv6-address-formats
- [https://inpa.tistory.com/entry/WEB-🌐-CIDR-이-무얼-말하는거야-⇛-개념-정리-계산법](https://inpa.tistory.com/entry/WEB-%F0%9F%8C%90-CIDR-%EC%9D%B4-%EB%AC%B4%EC%96%BC-%EB%A7%90%ED%95%98%EB%8A%94%EA%B1%B0%EC%95%BC-%E2%87%9B-%EA%B0%9C%EB%85%90-%EC%A0%95%EB%A6%AC-%EA%B3%84%EC%82%B0%EB%B2%95)
- https://corner.buka.sh/the-myth-of-port-5173-community-interpretations-behind-vites-default/