# 13.1 애플리케이션에서 확인하기

## 13.1.1 create-react-app

- `reportWebVitals` 함수는 웹에서 성능을 측정하기 위한 함수로, `PerformanceObserver` API를 사용한 web-vitals 라이브러리를 사용합니다. `PerformanceObserver` API는 웹페이지에서 다양한 성능을 측정할 수 있도록 도와주는 API로, 브라우저에서 웹페이지의 성능을 측정하기 위해 사용합니다.

## 13.1.2 create-next-app

- Next.js는 성능 측정을 할 수 있는 메서드인 `NextWebVitalsMetric`을 제공합니다. 기본적인 CWV 외에 Next.js에 특화된 몇 가지 사용자 지표 또한 제공합니다.
  - Next.js-hydration: 페이지가 서버 사이드에서 렌더링되어 하이드레이션하는 데 걸린 시간
  - Next.js-route-change-to-render: 페이지가 경로를 변경한 후 페이지 렌더링을 시작하는 데 걸리는 시간
  - Next.js-render: 경로 변경이 완료된 후 페이지를 렌더링하는 데 걸린 시간

# 13.2 구글 라이트하우스

## 13.2.1 구글 라이트하우스 - 탐색 모드(Navigation)

### 성능

- FCP, LCP, CLS 외에 3가지 추가적인 지표가 있습니다.
  - Time to Interactive: 페이지에서 사용자가 완전히 상호작용(인터렉션)할 수 있을 때까지 걸리는 시간을 측정하는데, FCP로 측정되는 페이지 내 콘텐츠가 표시되는 시점, 뷰포트 내에 대부분에 이벤트 핸들러가 부착되는 시점, 페이지가 유저 상호작용에 50ms 내로 응답하는 시점이 측정의 대상이 됩니다. 이 TTI 지표가 3.8초 이내면 좋음, 7.3초 이내면 보통, 그 이후는 개선이 필요한 것으로 봅니다.
  - Speed Index: 페이지가 로드되는 동안 콘텐츠가 얼마나 빨리 시각적으로 표시되는지를 계산하는데, 브라우저에서 로드되는 페이지를 실시간으로 캡처하고 Speedline 라이브러리를 통해 캡쳐된 이미지를 분석해서 speed Index를 계산합니다.
  - Total Blocking Time: 메인 스레드가 차단되는, 즉 메인 스레드에서 실행되는 작업이 50ms 이상 걸리면 이를 긴 작업으로 간주하고, 이렇게 실행되는 긴 작업을 모아서 Total Blocking Time(총 차단 시간)이라고 부릅니다. 모든 긴 작업이 대상이 아니라 FCP부터 TTI 사이의 작업만 대상으로 합니다.

### 접근성

- 저시력자의 스크린리더 등 다양한 사용자를 배려하기 위해 HTML과 CSS 등에 적절한 대안을 삽입하는 것을 접근성이라고 하며, 이 영역에서 평가하는 건 얼마나 적절하게 접근성을 제공하는지 여부입니다.

### 권장사항

- 웹사이트를 개발할 때 고려해야 할 요소들이 얼마나 지켜지고 있는지 확인할 수 있습니다.
- 컨텐츠 보안 정책(CSP, Content Security Policy)이 XSS 공격에 효과적인지 확인, HTTPS 사용, HTML Doctype 존재 여부, 콘솔 로그 오류 등 개발할 때 고려해야 할 여러 가지 사항들이 포함됩니다.

### 검색 엔진 최적화

- SEO는 웹페이지가 구글과 같은 검색엔진이 쉽게 정보를 가져가서 공개할 수 있도록 최적화되어 있는지 확인하는 것을 의미합니다. `robots.txt`의 유효, 이미지와 링크의 설명 문자 유무, `<meta>`나 `<title>`의 적합성 등을 확인합니다.

## 13.2.2 구글 라이트하우스 - 기간 모드(Timespan)

- 기간 모드는 실제 웹페이지를 탐색하는 동안 지표를 측정하는 것으로 앞서 볼 수 없었던 내용 두 가지는 흔적과 트리맵입니다. 흔적(View Trace)는 웹 성능을 추적한 기간을 성능 탭에서 보여주고, 트리맵(View Treemap)은 페이지를 불러올 때 함께 로딩한 모든 리소스를 함께 모아서 볼 수 있는 곳입니다. 실제로 불러왔지만 사용되지 않는 리소스를 확인할 수 있는데, 특정 시나리오에서만 실행되는 소스일 수도 있지만 해당 리소스가 불필요하게 크다면 체크해보는 것이 좋습니다.

## 13.2.3 구글 라이트하우스 - 스냅샷(Snapshot)

- 탐색 모드와 유사하지만 현재 페이지 상태를 기준으로 분석합니다. 페이지 로딩이 아닌 특정 페이지 특정 상태를 기준으로 분석하고 싶다면 스냅샷 모드를 사용하면 됩니다. 지표는 탐색 모드와 유사합니다.

# 13.3 WebPageTest

- WebPageTest는 웹사이트 성능 분석 도구로 라이트하우스, 크롬 개발자 도구처럼 무료 기능도 있지만 별도의 유료로 제공하는 도구도 있을 만큼 심도 깊은 분석이 가능합니다. WebPageTest에서 제공하는 분석 도구는 크게 다섯 가지로 나뉩니다.
  - Site Performance: 웹사이트의 성능 분석을 위한 도구
  - Core Web Vitals: 웹사이트 핵심 웹 지표 확인 도구
  - Lighthouse: 구글 라이트하우스 도구
  - Visual Comparison: 2개 이상의 사이트를 동시에 실행해 시간의 흐름에 따른 로딩 과정을 비교하는 도구
  - Traceroute: 네트워크 경로를 확인하는 도구
- 그 외 지표들은 추후 테스트하면서 리뷰 예정

# 13.4 크롬 개발자 도구

- 추후 테스트하면서 리뷰 예정
