# Part 1 : 애플후레시

## Next.js 많이 쓰는 이유를 알아보자

- CSR보다 SSR이 유행함
    - CSR의 문제 → 구글 검색 노출, 페이지 로딩 속도
    - SSR → 서버에서 웹페이지를 다 만들어서 보내주기 때문에 유저한테 JS를 보낼 필요가 없어서 조금 더 가볍고, 구글 검색 노출, 페이지 로딩 속도 좋음 + 원하는 영역에서는 CSR로 처리 가능

## Next.js 설치와 개발환경 셋팅

- node 버전 변경 관련 참고 포스팅
    - nvm 사용 중 "C:\Users\������\AppData\Roaming\nvm could not be found or does not exist. Exiting.”
        
        [nvm 윈도우 설치 중 C:\Users\������\AppData\Roaming\nvm,  The system cannot find the path specified. 문제 해결](https://jinnnkcoding.tistory.com/189)
        
    - Node.js 최신 버전 업데이트와 버전 변경이 가능한 nvm 사용하기
        
        [[Node.js]  Node와 NPM 버전 확인 및 최신 버전 업데이트](https://mine-it-record.tistory.com/664)
        
- npx create-next-app@latest
- 폴더&파일 구조
    - page.js → 메인 페이지
    - layout.js → page.js를 감싸는 페이지(구조로 보면 page.js의 부모) → page.js 바깥에 적어줘야 할 코드는 여기에 작성 → ex) head 내용, 상단 고정 기능 등
    - globals.css → 모든 전역 css
    - xxx.module.css → 특정 페이지에만 적용 가능한 모듈 css
    - public 폴더 → 이미지 등 소스코드 외의 파일들 보관용
    

## 페이지 레이아웃 만들기 (React 기초문법)

- Next.js는 React 위에 얹혀 사는 프레임워크 같은 거라 React 문법 사용
- 리액트버전 HTML 특징 4개
    - return () 안에 HTML 넣을 때 → 병렬 구조로 넣을 수 없음
    - class 넣고 싶으면 → className
- HTML 안에 변수 넣으려면 → { 변수 }
- inline style 속성 넣으려면 → style={{ color: ‘red’, fontSize: ‘20px’ }} → 기본적으로 JavaScript object 자료형이기 때문에 key값에 대시 기호 같은 걸 적을 수 없음 → 그래서 카멜케이스로 작성

- #페이지 레이아웃 만들 때 레이아웃 안에서 { children } 넣어줘야하고, 인자로도 children 넘겨줘야 함
    
    ```jsx
    export default function CartLayout({ **children** }) {
      
      return (
        <div>
          <p>현카무이자이벤트</p>
          **{children}**
        </div>
      )
    }
    ```
    

## 여러 페이지 만들기 (라우팅)

- 폴더명이 router이름이자 url이 되는 거고, 폴더 밑에는 동일하게 page.js로 작명한 파일 → ex) list라는 폴더를 만들고 그 아래 page.js는 만들면, /list로 접속 시 page.js 내용 보여줌
    1. app폴더 안에 폴더 만들고(그 폴더명이 url에 붙는 이름)
    2. 그 안에 page.js 넣고
    3. 그 안에 레이아웃 작업
- 해당 페이지로 가는 작업을 할 때는 <Link> → a tag와 동일하지만 좀 더 스무스하게 넘겨줌
    
    ```jsx
    import Image from 'next/image'
    import styles from './page.module.css'
    **import Link from 'next/link'**
    
    export default function Home() {
      let name = 'park';
      let link = 'http://google.com'
      
      return (
        <main>
          <div className="navbar">
            **<Link href="/">홈</Link>
            <Link href="/list">List</Link>**
          </div>
          <h1 className="title">Programming Log</h1>
          <p className="title-sub">by dev kim</p>
        </main>
      )
    }
    ```
    
- header나 gnb, footer 같이 페이지 전체에서 노출되어야 되는 영역은 layout.js body 안에 작성
    
    ```jsx
    import './globals.css'
    import { Inter } from 'next/font/google'
    import Link from 'next/link'
    
    const inter = Inter({ subsets: ['latin'] })
    
    export const metadata = {
      title: 'Create Next App',
      description: 'Generated by create next app',
    }
    
    export default function RootLayout({ children }) {
      return (
        <html lang="en">
          <body>
            <div className="navbar">
              <Link href="/">홈</Link>
              <Link href="/list">List</Link>
            </div>
            {children} // page.js 들어가는 부분
          </body>
        </html>
      )
    }
    ```
    

- **page.js 보여줄 때**
    - 옆에 layout.js 있으면 그걸로 page.js 싸맴
    - 상위폴더에 layout.js 있으면 그걸로 1번 싸맴
    - 상위폴더에 또 layout.js가 있으면 그걸로 2번 싸맴
    - (유치원 버전) page.js 보여줄 때는 옆에, 상위에 있는 모든 layout.js 합쳐서 보여줌
    - 페이지 변경과 상관없이 계속 보여줄 UI는 layout.js 쓰면 편할지도
    

## html을 반복문으로 줄이고 싶으면 map

```jsx
export default function List() {
  let 상품 = ['Tomatoes', 'Pasta', 'Coconut'];
  
  return (
    <div>
      <h2 className="title">상품목록</h2>
      {
        상품.map((item) => {
          return (
            <div className="food">
              <h4>{item} $40</h4>
            </div>
          )
        })
      }
    </div>
  )
}
```

## Next.js에서 이미지 넣는 법 2개

- public 폴더 밑에서 이미지 관리하고 경로 가져올 때 `/food0.png` 처럼 / 에서 바로 접근 가능
- 이미지를 뿌릴 때 최적화된 이미지로 넣을 수 있음
    - lazy loading, 사이즈최적화 → 이미지가 늦게 떠서 밀려나는 layout shift 현상 방지
- 최적화된 이미지 넣으려면
    - import Image from ‘next/image’
    - <Image /> 컴포넌트 사용
- 최적화 가능한 <Image /> 컴포넌트 제약 조건
    - 이미지 경로를 import해서 넣는 방식으로만 해야 함
    - 반복문을 돌려야 하는 경우 src 안에 require(’이미지경로’) 같이 별도의 문법 적용 필요
    - 외부 이미지 링크를 넣고 싶으면 width, height 속성이 정확히 필요하고 next.config.js에서 별도 remotePatterns 세팅 필요함
    - 때문에 다 만든 후에 최적화하는 것이 좋음

**layout 터지는 거 해결하고 이 섹션 끝부분 다시 들어야 함…**